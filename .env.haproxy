# =============================================================================
# HAProxy Environment Configuration
# =============================================================================
# This configures the HAProxy load balancer for the PostgreSQL HA cluster
# Run with: docker-compose --env-file .env.haproxy -f docker-compose.haproxy.yml up -d
# =============================================================================

# -----------------------------------------------------------------------------
# Node IP Addresses (REQUIRED - Update these with your actual VM IPs)
# -----------------------------------------------------------------------------
# These must be the actual IP addresses where Patroni nodes are running

NODE1_IP=192.168.1.101
NODE2_IP=192.168.1.102
NODE3_IP=192.168.1.103

# -----------------------------------------------------------------------------
# HAProxy Port Configuration
# -----------------------------------------------------------------------------

# Primary (read/write) PostgreSQL endpoint
HAPROXY_PRIMARY_PORT=5000

# Replica (read-only) PostgreSQL endpoint
HAPROXY_REPLICA_PORT=5001

# HAProxy statistics dashboard port
HAPROXY_STATS_PORT=7000

# -----------------------------------------------------------------------------
# Backend Patroni Ports
# -----------------------------------------------------------------------------
# These should match the ports configured in each VM's .env file

# PostgreSQL ports on each node
POSTGRES_PORT_NODE1=5432
POSTGRES_PORT_NODE2=5432
POSTGRES_PORT_NODE3=5432

# Patroni REST API ports on each node (for health checks)
PATRONI_API_PORT_NODE1=8008
PATRONI_API_PORT_NODE2=8008
PATRONI_API_PORT_NODE3=8008

# -----------------------------------------------------------------------------
# HAProxy Stats Dashboard (Optional)
# -----------------------------------------------------------------------------
# Access the dashboard at http://<haproxy-ip>:7000/stats

HAPROXY_STATS_USER=admin
HAPROXY_STATS_PASSWORD=admin123
